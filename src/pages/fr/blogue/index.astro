---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';
import BlogListFr from '~/components/blog/ListFr.astro';
import Headline from '~/components/blog/Headline.astro';
import Pagination from '~/components/blog/Pagination.astro';

import { headerDataFr, footerDataFr } from '~/navigation-fr';
import { fetchFrenchPosts, blogPostsPerPage } from '~/utils/blog-fr';

export const prerender = true;

const allPosts = await fetchFrenchPosts();
const postsPerPage = blogPostsPerPage || 6;
const posts = allPosts.slice(0, postsPerPage);
const hasNextPage = allPosts.length > postsPerPage;

const metadata = {
  title: 'Blogue - Guides et articles sur Wealthsimple',
  description:
    'Guides, comparaisons et astuces pour investir avec Wealthsimple. Conseils pratiques pour les investisseurs canadiens.',
  robots: { index: true, follow: true },
  openGraph: { type: 'blog' },
};
---

<Layout metadata={metadata}>
  <Header {...headerDataFr} />

  <section class="px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">
    <Headline subtitle="Conseils, guides et astuces pour investir avec Wealthsimple!"> Blogue </Headline>

    {
      posts.length > 0 ? (
        <>
          <BlogListFr posts={posts} />
          <Pagination prevUrl={undefined} nextUrl={hasNextPage ? '/fr/blogue/2' : undefined} />
        </>
      ) : (
        <div class="text-center py-12">
          <p class="text-lg text-muted dark:text-slate-400 mb-4">Aucun article disponible pour le moment.</p>
          <p class="text-muted dark:text-slate-400">
            Les articles en français arrivent bientôt! En attendant, consultez notre{' '}
            <a href="/blog" class="text-green-600 hover:underline">
              blogue en anglais
            </a>
            .
          </p>
        </div>
      )
    }
  </section>

  <Footer {...footerDataFr} />
</Layout>
